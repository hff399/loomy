{% if section.index <= 2 %}
  {{ 'logo-list.css' | asset_url | preload_tag: as: 'style' }}
{% endif %}
{{ 'logo-list.css' | asset_url | stylesheet_tag }}
  {% capture logoContent %}
      {% for block in section.blocks %}
          {% if block.type == 'logo' %}
              <{% if block.settings.image_link != blank %}a href="{{ block.settings.image_link }}"{% else %}div{% endif %} class="logo-item">
                <div id="block-{{ block.id }}" class="logo-item-inner logo-background-{{ section.settings.show_card_background }} logo-border-{{ section.settings.show_card_border }}">
                  {% liquid 
                    if block.settings.image != blank
                      render 'lazy-images', image: block.settings.image
                    else
                      echo 'logo' | placeholder_svg_tag: 'placeholder-svg'
                    endif 
                  %}
                </div>
              </{% if block.settings.image_link != blank %}a{% else %}div{% endif %}>
          {% endif %}
      {% endfor %}
    {% endcapture %}

  {%- capture corner_style -%}
{% if section.settings.corner_style == 'top' %}
    round-section round-top
    {% elsif section.settings.corner_style == 'bottom' %}
    round-section round-bottom
    {% elsif section.settings.corner_style == 'both' %}
    round-section round-bottom round-top
{% endif %}
{%- endcapture -%}

  {% liquid
    if section.settings.section_container_width == 'global'
      assign containerClass = settings.container_width
    else
      assign containerClass = section.settings.section_container_width
    endif
  %}

  <div class="section-wrapper scheme-{{ section.settings.color_scheme }} section-spacing section-{{ section.settings.section_background }} {{ corner_style }}">
    <div class="{{ containerClass }}">
      {% if section.settings.heading != blank %}
        <div class="section-header text-{{ section.settings.alignment }}">
          <{{ section.settings.seo_heading }} class="{{ section.settings.heading_font }} {{ section.settings.heading_size }}  {% if settings.enable_heading_animation %} animate-element-parent{% endif %}">
          {% if settings.enable_heading_animation %}
                  <animate-element data-animate="fade-up-large" data-animate-delay="50">
                {% endif %}
                {%- capture markersPrefix -%}
                  <span class="markers-text {{ section.settings.markers_font }}">
                {%- endcapture -%} 
                {%- capture markersSuffix -%}
                  </span>
                {%- endcapture -%}
                {{- section.settings.heading | replace: '++', '<br/>' | replace: "[", markersPrefix | replace: "]", markersSuffix -}}
                {% if settings.enable_heading_animation %}
                </animate-element>
              {% endif %}
            </{{ section.settings.seo_heading }}>
          </div>
        {% endif %}
        {% if section.blocks.size > 0 %}
        <div
          class="logo-items-wrapper{% if section.settings.layout_type == 'grid' %} stacked{% if section.settings.mobile_swipe == true %} mobile-swipe{% endif %}{% elsif section.settings.layout_type == 'marquee'  %} marquee autoplay-infinite {{ section.settings.direction }}-direction{% endif %}"
          {% if section.settings.layout_type == 'marquee' %}
          data-marquee-speed="{{ section.settings.scrolling_speed }}"
          data-marquee-speed-mobile="{{ section.settings.scrolling_speed_mobile }}"
          data-marquee-text
          {% endif %}>
          {% if section.settings.layout_type == 'grid' %}
            {{ logoContent }}
          {% else %}
            {% for i in (1..10) %}
              {% if section.settings.layout_type == 'marquee' %}
                <div class="logo-list-marquee" data-marque-node>
                  {{ logoContent }}
                </div>
              {% endif %}
            {% endfor %}
          {% endif %}
        </div>
        {% endif %}
      </div>
    </div>

  <style>
    #shopify-section-{{ section.id }} {
      --top-spacing: {{ section.settings.top_space_desktop }}px;
      --bottom-spacing: {{ section.settings.bottom_space_desktop }}px;
      --column-count: {{ section.settings.columns_desktop }};
      --column-space: {{ section.settings.column_spacing }}px;
      --column-border-radius: {{ section.settings.border_radius }}px;
      --animation-speed: {{ section.settings.scrolling_speed }}s;
      --round-section-radius: {{ section.settings.corner_radius }}px;
    }
    @media (max-width: 1199px) {
      #shopify-section-{{ section.id }} .logo-items-wrapper.stacked {
        grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
      }
    }
    @media (max-width: 767px) {
      #shopify-section-{{ section.id }} .logo-items-wrapper.stacked {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
    }

    {% for block in section.blocks %}
      #block-{{ block.id }} {
        --logoWidth: {{ block.settings.image_width }}%;
      }
    {% endfor %}
    @media only screen and (max-width: 767px) {
      #shopify-section-{{ section.id }} {
        --top-spacing: {{ section.settings.top_space_mobile }}px;
        --bottom-spacing: {{ section.settings.bottom_space_mobile }}px;
        --animation-speed: {{ section.settings.scrolling_speed_mobile }}s;
      }
    }
    {% if section.settings.section_visibility == 'large' %}
      @media(max-width: 767px) {
        #shopify-section-{{ section.id }} {
          display: none !important;
        }
      }
    {% elsif section.settings.section_visibility == 'small' %}
    @media(min-width: 768px) {
      #shopify-section-{{ section.id }} {
        display: none !important;
      }
    }
  {% endif %}
  </style>
  {% schema %}
    {
      "name": "t:sections.logo-list.name",
      "tag": "section",
      "class": "logo-list-section",
      "disabled_on": {
        "groups": ["header", "footer", "custom.Overlay"]
      },
      "max_blocks": 12,
      "settings": [
        {
          "type": "select",
          "id": "section_visibility",
          "label": "t:sections.all.section_visibility.label",
          "default": "always",
          "options": [
            {
              "label": "t:sections.all.section_visibility.always.label",
              "value": "always"
            },
            {
              "label": "t:sections.all.section_visibility.small.label",
              "value": "small"
            },
            {
              "label": "t:sections.all.section_visibility.large.label",
              "value": "large"
            }
          ]
        },
        {
          "type": "color_scheme",
          "id": "color_scheme",
          "label": "t:sections.all.colors.label",
          "default": "primary"
        },
        {
          "type": "select",
          "id": "section_background",
          "label": "t:sections.all.section_background.label",
          "default": "solid",
          "options": [
            {
              "label": "t:sections.all.section_background.solid.label",
              "value": "solid"
            },
            {
              "label": "t:sections.all.section_background.gradient.label",
              "value": "gradient"
            }
          ]
        },
        {
          "type": "select",
          "id": "section_container_width",
          "label": "t:sections.all.section_container_width.label",
          "default": "no-container",
          "options": [
            {
              "label": "t:sections.all.section_container_width.global.label",
              "value": "global"
            },
            {
              "label": "t:sections.all.section_container_width.container-sm.label",
              "value": "container-sm"
            },
            {
              "label": "t:sections.all.section_container_width.container.label",
              "value": "container-md"
            },
            {
              "label": "t:sections.all.section_container_width.container-md.label",
              "value": "container"
            },
            {
              "label": "t:sections.all.section_container_width.container-fullwidth.label",
              "value": "container-fullwidth"
            },
            {
              "label": "t:sections.all.section_container_width.no-container.label",
              "value": "no-container"
            }
          ]
        },
        {
          "type": "select",
          "id": "corner_style",
          "default": "none",
          "label": "t:sections.all.section_corner_style.label",
          "options": [
            {
              "value": "top",
              "label": "t:sections.all.section_corner_style.top.label"
            },
            {
              "value": "bottom",
              "label": "t:sections.all.section_corner_style.bottom.label"
            },
            {
              "value": "both",
              "label": "t:sections.all.section_corner_style.both.label"
            },
            {
              "value": "none",
              "label": "t:sections.all.section_corner_style.none.label"
            }
          ]
        },
        {
          "type": "range",
          "id": "corner_radius",
          "label": "t:settings_schema.global.settings.corner_radius.label",
          "default": 20,
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px"
        },
        {
          "type": "header",
          "content": "t:sections.logo-list.settings.header.content"
        },
        {
          "type": "inline_richtext",
          "id": "heading",
          "label": "t:settings_schema.global.settings.heading.label",
          "info": "t:settings_schema.global.settings.heading.info"
        },
        {
          "type": "select",
          "id": "heading_size",
          "label": "t:sections.all.heading_size.label",
          "default": "h3",
          "options": [
            {
              "value": "h1",
              "label": "t:sections.all.heading_size.h1.label"
            },
            {
              "value": "h2",
              "label": "t:sections.all.heading_size.h2.label"
            },
            {
              "value": "h3",
              "label": "t:sections.all.heading_size.h3.label"
            },
            {
              "value": "h4",
              "label": "t:sections.all.heading_size.h4.label"
            },
            {
              "value": "h5",
              "label": "t:sections.all.heading_size.h5.label"
            },
            {
              "value": "h6",
              "label": "t:sections.all.heading_size.h6.label"
            }
          ]
        },
        {
          "type": "select",
          "id": "seo_heading",
          "label": "t:sections.all.seo_heading.label",
          "info": "t:sections.all.seo_heading.info",
          "default": "h3",
          "options": [
            {
              "value": "h1",
              "label": "H1"
            },
            {
              "value": "h2",
              "label": "H2"
            },
            {
              "value": "h3",
              "label": "H3"
            },
            {
              "value": "h4",
              "label": "H4"
            },
            {
              "value": "h5",
              "label": "H5"
            },
            {
              "value": "h6",
              "label": "H6"
            },
            {
              "value": "div",
              "label": "div"
            },
            {
              "value": "span",
              "label": "span"
            },
            {
              "value": "p",
              "label": "p"
            }
          ]
        },
        {
          "type": "select",
          "id": "heading_font",
          "default": "heading-font",
          "label": "t:sections.all.heading_font.label",
          "options": [
            {
              "value": "heading-font",
              "label": "t:sections.all.heading_font.heading-font.label"
            },
            {
              "value": "body-font",
              "label": "t:sections.all.heading_font.body-font.label"
            },
            {
              "value": "accent-font",
              "label": "t:sections.all.heading_font.accent-font.label"
            }
          ]
        },
        {
        "type": "select",
        "id": "markers_font",
        "default": "accent-font",
        "label": "t:sections.all.markers_font.label",
        "options": [
          {
            "value": "heading-font",
            "label": "t:sections.all.markers_font.heading-font.label"
          },
          {
            "value": "body-font",
            "label": "t:sections.all.markers_font.body-font.label"
          },
          {
            "value": "accent-font",
            "label": "t:sections.all.markers_font.accent-font.label"
          }
        ]
      },
        {
          "type": "text_alignment",
          "id": "alignment",
          "label": "t:sections.logo-list.settings.alignment.label",
          "default": "center"
        },
        {
          "type": "header",
          "content": "t:sections.logo-list.settings.header.general"
        },
        {
          "type": "checkbox",
          "id": "show_card_background",
          "label": "t:sections.logo-list.settings.show_card_background.label",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_card_border",
          "label": "t:sections.logo-list.settings.show_card_border.label",
          "default": false
        },
        {
          "type": "range",
          "id": "border_radius",
          "label": "t:sections.logo-list.settings.border_radius.label",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 0,
          "unit": "px"
        },
        {
          "type": "select",
          "id": "layout_type",
          "label": "t:sections.logo-list.settings.layout_type.label",
          "default": "marquee",
          "options": [
            {
              "value": "grid",
              "label": "t:sections.logo-list.settings.layout_type.options.grid.label"
            },
            {
              "value": "marquee",
              "label": "t:sections.logo-list.settings.layout_type.options.marquee.label"
            }
          ]
        },
        {
          "type": "header",
          "content": "t:sections.logo-list.settings.header.grid"
        },
        {
          "type": "range",
          "id": "columns_desktop",
          "label": "t:sections.logo-list.settings.columns_desktop.label",
          "default": 8,
          "min": 2,
          "max": 10,
          "step": 1
        },
        {
          "type": "range",
          "id": "column_spacing",
          "label": "t:sections.logo-list.settings.column_spacing.label",
          "min": 0,
          "max": 40,
          "unit": "px",
          "step": 2,
          "default": 20
        },
        {
          "type": "header",
          "content": "t:sections.logo-list.settings.header.marquee"
        },
        {
          "type": "range",
          "id": "scrolling_speed",
          "label": "t:sections.logo-list.settings.scrolling_speed.label",
          "min": 1,
          "step": 1,
          "max": 100,
          "unit": "s",
          "default": 15
        },
        {
          "type": "range",
          "id": "scrolling_speed_mobile",
          "label": "t:sections.logo-list.settings.scrolling_speed_mobile.label",
          "min": 1,
          "step": 1,
          "max": 100,
          "unit": "s",
          "default": 15
        },
        {
          "type": "select",
          "id": "direction",
          "label": "t:sections.logo-list.settings.direction.label",
          "default": "ltr",
          "options": [
            {
              "value": "ltr",
              "label": "t:sections.logo-list.settings.direction.options.ltr.label"
            },
            {
              "value": "rtl",
              "label": "t:sections.logo-list.settings.direction.options.rtl.label"
            }
          ]
        },
        {
          "type": "header",
          "content": "t:sections.all.headers.mobile"
        },
        {
          "type": "checkbox",
          "id": "mobile_swipe",
          "label": "t:sections.collection-tabs.settings.mobile_swipe.label",
          "default": true,
          "info": "t:sections.collection-tabs.settings.mobile_swipe.info"
        },
        {
          "type": "header",
          "content": "t:sections.all.spacing.section_spacing_heading"
        },
        {
          "type": "range",
          "id": "top_space_desktop",
          "label": "t:sections.all.spacing.top_space_desktop",
          "default": 60,
          "min": 0,
          "max": 100,
          "step": 5
        },
        {
          "type": "range",
          "id": "bottom_space_desktop",
          "label": "t:sections.all.spacing.bottom_space_desktop",
          "default": 60,
          "min": 0,
          "max": 100,
          "step": 5
        },
        {
          "type": "range",
          "id": "top_space_mobile",
          "label": "t:sections.all.spacing.top_space_mobile",
          "default": 40,
          "min": 0,
          "max": 100,
          "step": 5
        },
        {
          "type": "range",
          "id": "bottom_space_mobile",
          "label": "t:sections.all.spacing.bottom_space_mobile",
          "default": 40,
          "min": 0,
          "max": 100,
          "step": 5
        }
      ],
      "blocks": [
        {
          "type": "logo",
          "name": "t:sections.logo-list.blocks.logo.name",
          "settings": [
            {
              "type": "image_picker",
              "id": "image",
              "label": "t:sections.logo-list.blocks.logo.settings.image.label"
            },
            {
              "type": "url",
              "id": "image_link",
              "label": "t:sections.logo-list.blocks.logo.settings.image_link.label",
              "info": "t:sections.logo-list.blocks.logo.settings.image_link.info"
            },
            {
              "type": "range",
              "id": "image_width",
              "label": "t:sections.logo-list.blocks.logo.settings.image_width.label",
              "default": 100,
              "min": 50,
              "max": 100,
              "unit": "%",
              "step": 5
            }
          ]
        }
      ],
      "presets": [
        {
          "name": "t:sections.logo-list.presets.name",
          "blocks": [
            {
              "type": "logo"
            },
            {
              "type": "logo"
            },
            {
              "type": "logo"
            },
            {
              "type": "logo"
            },
            {
              "type": "logo"
            },
            {
              "type": "logo"
            },
            {
              "type": "logo"
            },
            {
              "type": "logo"
            }
          ]
        }
      ]
    }
  {% endschema %}