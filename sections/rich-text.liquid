{%- capture corner_style -%}
{% if section.settings.corner_style == 'top' %}
    round-section round-top
    {% elsif section.settings.corner_style == 'bottom' %}
    round-section round-bottom
    {% elsif section.settings.corner_style == 'both' %}
    round-section round-bottom round-top
{% endif %}
{%- endcapture -%}

{% liquid
  if section.settings.section_container_width == 'global'
    assign containerClass = settings.container_width
  else
    assign containerClass = section.settings.section_container_width
  endif
%}
<div class="section-wrapper scheme-{{ section.settings.color_scheme }} section-spacing {{ corner_style }} section-{{ section.settings.section_background }}">
  <div class="{{ containerClass }}">
    <div class="rich-text-wrapper {{ section.settings.content_width }}-width text-{{ section.settings.text_alignment }} m-auto">
        <div class="rich-text-inner">
          <div class="rich-text-content">
            {% for block in section.blocks %}
              {% if block.type == 'heading' and block.settings.heading != blank %}
                <{{ block.settings.seo_heading }} class="{{ block.settings.heading_font }} {{ block.settings.heading_size }}">
                  {%- capture markersPrefix -%}
                    <span class="markers-text {{ block.settings.markers_font }}">
                  {%- endcapture -%} 
                  {%- capture markersSuffix -%}
                    </span>
                  {%- endcapture -%}
                {{- block.settings.heading | replace: '++', '<br/>' | replace: "[", markersPrefix | replace: "]", markersSuffix -}}
                </{{ block.settings.seo_heading }}>
              {% elsif block.type == 'text' %}
                {% if block.settings.description != blank %}
                  <div class="rich-text-description rte {{ block.settings.description_size }}">
                    {{ block.settings.description | replace: '<table', '<div class="table-responsive"><table' | replace: '</table>', '</table></div>' }}
                  </div>
                {% endif %}
              {% elsif block.type == 'button' %}
                {% if block.settings.button_text != blank %}
                  <div class="col-button-wrap">
                    {% render 'button-wrapper'
                      ,
 block_settings: block
                      ,
 button_style: block.settings.button_style
                      ,
 button_text: block.settings.button_text
                      ,
 button_link: block.settings.button_link
                      ,
 button_size: block.settings.button_size
                    %}
                  </div>
                {% endif %}
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
  <style>
    #shopify-section-{{ section.id }} {
      --top-spacing: {{ section.settings.top_space_desktop }}px;
      --bottom-spacing: {{ section.settings.bottom_space_desktop }}px;
      --round-section-radius: {{ section.settings.corner_radius }}px;
    }
    @media only screen and (max-width: 767px) {
      #shopify-section-{{ section.id }} {
        --top-spacing: {{ section.settings.top_space_mobile }}px;
        --bottom-spacing: {{ section.settings.bottom_space_mobile }}px;
      }
    }
    {% if section.settings.section_visibility == 'large' %}
      @media(max-width: 767px) {
        #shopify-section-{{ section.id }} {
          display: none !important;
        }
      }
    {% elsif section.settings.section_visibility == 'small' %}
    @media(min-width: 768px) {
      #shopify-section-{{ section.id }} {
        display: none !important;
      }
    }
  {% endif %}
  </style>
  {% schema %}
    {
      "name": "t:sections.rich-text.name",
      "tag": "section",
      "class": "rich-text-section",
      "disabled_on": {
        "groups": ["header", "footer", "custom.Overlay"]
      },
      "settings": [
        {
          "type": "select",
          "id": "section_visibility",
          "label": "t:sections.all.section_visibility.label",
          "default": "always",
          "options": [
            {
              "label": "t:sections.all.section_visibility.always.label",
              "value": "always"
            },
            {
              "label": "t:sections.all.section_visibility.small.label",
              "value": "small"
            },
            {
              "label": "t:sections.all.section_visibility.large.label",
              "value": "large"
            }
          ]
        },
        {
          "type": "color_scheme",
          "id": "color_scheme",
          "label": "t:sections.all.colors.label",
          "default": "primary"
        },
        {
          "type": "select",
          "id": "section_background",
          "label": "t:sections.all.section_background.label",
          "default": "solid",
          "options": [
            {
              "label": "t:sections.all.section_background.solid.label",
              "value": "solid"
            },
            {
              "label": "t:sections.all.section_background.gradient.label",
              "value": "gradient"
            }
          ]
        },
        {
          "type": "select",
          "id": "section_container_width",
          "label": "t:sections.all.section_container_width.label",
          "default": "global",
          "options": [
            {
              "label": "t:sections.all.section_container_width.global.label",
              "value": "global"
            },
            {
              "label": "t:sections.all.section_container_width.container-sm.label",
              "value": "container-sm"
            },
            {
              "label": "t:sections.all.section_container_width.container.label",
              "value": "container-md"
            },
            {
              "label": "t:sections.all.section_container_width.container-md.label",
              "value": "container"
            },
            {
              "label": "t:sections.all.section_container_width.container-fullwidth.label",
              "value": "container-fullwidth"
            },
            {
              "label": "t:sections.all.section_container_width.no-container.label",
              "value": "no-container"
            }
          ]
        },
        {
          "type": "select",
          "id": "corner_style",
          "default": "none",
          "label": "t:sections.all.section_corner_style.label",
          "options": [
            {
              "value": "top",
              "label": "t:sections.all.section_corner_style.top.label"
            },
            {
              "value": "bottom",
              "label": "t:sections.all.section_corner_style.bottom.label"
            },
            {
              "value": "both",
              "label": "t:sections.all.section_corner_style.both.label"
            },
            {
              "value": "none",
              "label": "t:sections.all.section_corner_style.none.label"
            }
          ]
        },
        {
          "type": "range",
          "id": "corner_radius",
          "label": "t:settings_schema.global.settings.corner_radius.label",
          "default": 70,
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px"
        },
        {
          "type": "text_alignment",
          "id": "text_alignment",
          "label": "t:sections.rich-text.settings.text_alignment.label",
          "default": "center"
        },
        {
          "type": "select",
          "id": "content_width",
          "label": "t:sections.rich-text.settings.content_width.label",
          "default": "small",
          "options": [
            {
              "value": "small",
              "label": "t:sections.rich-text.settings.content_width.small.label"
            },
            {
              "value": "medium",
              "label": "t:sections.rich-text.settings.content_width.medium.label"
            },
            {
              "value": "large",
              "label": "t:sections.rich-text.settings.content_width.large.label"
            }
          ]
        },
        {
          "type": "header",
          "content": "t:sections.all.spacing.section_spacing_heading"
        },
        {
          "type": "range",
          "id": "top_space_desktop",
          "label": "t:sections.all.spacing.top_space_desktop",
          "default": 70,
          "min": 0,
          "max": 150,
          "step": 5
        },
        {
          "type": "range",
          "id": "bottom_space_desktop",
          "label": "t:sections.all.spacing.bottom_space_desktop",
          "default": 70,
          "min": 0,
          "max": 150,
          "step": 5
        },
        {
          "type": "range",
          "id": "top_space_mobile",
          "label": "t:sections.all.spacing.top_space_mobile",
          "default": 40,
          "min": 0,
          "max": 100,
          "step": 5
        },
        {
          "type": "range",
          "id": "bottom_space_mobile",
          "label": "t:sections.all.spacing.bottom_space_mobile",
          "default": 40,
          "min": 0,
          "max": 100,
          "step": 5
        }
      ],
      "blocks": [
        {
          "type": "heading",
          "name": "t:sections.rich-text.blocks.heading.name",
          "limit": 1,
          "settings": [
            {
              "type": "inline_richtext",
              "id": "heading",
              "label": "t:settings_schema.global.settings.heading.label",
              "default": "Rich text heading",
              "info": "t:settings_schema.global.settings.heading.info"
            },
            {
              "type": "select",
              "id": "heading_size",
              "label": "t:sections.all.heading_size.label",
              "default": "h2",
              "options": [
                {
                  "value": "h1",
                  "label": "t:sections.all.heading_size.h1.label"
                },
                {
                  "value": "h2",
                  "label": "t:sections.all.heading_size.h2.label"
                },
                {
                  "value": "h3",
                  "label": "t:sections.all.heading_size.h3.label"
                },
                {
                  "value": "h4",
                  "label": "t:sections.all.heading_size.h4.label"
                },
                {
                  "value": "h5",
                  "label": "t:sections.all.heading_size.h5.label"
                },
                {
                  "value": "h6",
                  "label": "t:sections.all.heading_size.h6.label"
                }
              ]
            },
            {
              "type": "select",
              "id": "seo_heading",
              "label": "t:sections.all.seo_heading.label",
              "info": "t:sections.all.seo_heading.info",
              "default": "h2",
              "options": [
                {
                  "value": "h1",
                  "label": "H1"
                },
                {
                  "value": "h2",
                  "label": "H2"
                },
                {
                  "value": "h3",
                  "label": "H3"
                },
                {
                  "value": "h4",
                  "label": "H4"
                },
                {
                  "value": "h5",
                  "label": "H5"
                },
                {
                  "value": "h6",
                  "label": "H6"
                },
                {
                  "value": "div",
                  "label": "div"
                },
                {
                  "value": "span",
                  "label": "span"
                },
                {
                  "value": "p",
                  "label": "p"
                }
              ]
            },
            {
              "type": "select",
              "id": "heading_font",
              "default": "heading-font",
              "label": "t:sections.all.heading_font.label",
              "options": [
                {
                  "value": "heading-font",
                  "label": "t:sections.all.heading_font.heading-font.label"
                },
                {
                  "value": "body-font",
                  "label": "t:sections.all.heading_font.body-font.label"
                },
                {
                  "value": "accent-font",
                  "label": "t:sections.all.heading_font.accent-font.label"
                }
              ]
            },
            {
              "type": "select",
              "id": "markers_font",
              "default": "accent-font",
              "label": "t:sections.all.markers_font.label",
              "options": [
                {
                  "value": "heading-font",
                  "label": "t:sections.all.markers_font.heading-font.label"
                },
                {
                  "value": "body-font",
                  "label": "t:sections.all.markers_font.body-font.label"
                },
                {
                  "value": "accent-font",
                  "label": "t:sections.all.markers_font.accent-font.label"
                }
              ]
            }
          ]
        },
        {
          "type": "text",
          "name": "t:sections.rich-text.blocks.text.name",
          "settings": [
            {
              "type": "richtext",
              "id": "description",
              "label": "t:settings_schema.global.settings.description.label",
              "default": "<p>Use this description about your brand with your customers.</p>"
            },
            {
              "type": "select",
              "id": "description_size",
              "label": "t:sections.all.description_size.label",
              "default": "text",
              "options": [
                {
                  "label": "t:sections.all.description_size.text-xsmall.label",
                  "value": "text-xs"
                },
                {
                  "label": "t:sections.all.description_size.text-small.label",
                  "value": "text-sm"
                },
                {
                  "label": "t:sections.all.description_size.text.label",
                  "value": "text"
                },
                {
                  "label": "t:sections.all.description_size.text-medium.label",
                  "value": "text-md"
                },
                {
                  "label": "t:sections.all.description_size.text-large.label",
                  "value": "text-lg"
                },
                {
                  "label": "t:sections.all.description_size.text-xlarge.label",
                  "value": "text-xl"
                }
              ]
            }
          ]
        },
        {
          "type": "button",
          "name": "t:sections.rich-text.blocks.button.name",
          "limit": 1,
          "settings": [
            {
              "type": "text",
              "id": "button_text",
              "label": "t:sections.all.button_text.label",
              "default": "Button"
            },
            {
              "type": "url",
              "id": "button_link",
              "label": "t:sections.all.button_link.label",
              "default": "/collections/all"
            },
            {
              "type": "select",
              "id": "button_style",
              "default": "global",
              "label": "t:sections.all.button_style.label",
              "options": [
                {
                  "value": "global",
                  "label": "t:sections.all.button_style.global.label"
                },
                {
                  "value": "solid",
                  "label": "t:sections.all.button_style.solid.label"
                },
                {
                  "value": "outline",
                  "label": "t:sections.all.button_style.outline.label"
                },
                {
                  "value": "solid_animated",
                  "label": "t:sections.all.button_style.solid_animated.label"
                },
                {
                  "value": "outline_animated",
                  "label": "t:sections.all.button_style.outline_animated.label"
                },
                {
                  "value": "link",
                  "label": "t:sections.all.button_style.link.label"
                }
              ]
            },
            {
              "type": "select",
              "id": "button_size",
              "default": "global",
              "label": "t:sections.all.button_size.label",
              "options": [
                {
                  "value": "global",
                  "label": "t:sections.all.button_size.global.label"
                },
                {
                  "value": "button-sm",
                  "label": "t:sections.all.button_size.small-button.label"
                },
                {
                  "value": "button-regular",
                  "label": "t:sections.all.button_size.regular-button.label"
                },
                {
                  "value": "button-lg",
                  "label": "t:sections.all.button_size.large-button.label"
                }
              ]
            }
          ]
        }
      ],
      "presets": [
        {
          "name": "t:sections.rich-text.presets.name",
          "blocks": [
            {
              "type": "heading"
            },
            {
              "type": "text"
            },
            {
              "type": "button"
            }
          ]
        }
      ]
    }
  {% endschema %}