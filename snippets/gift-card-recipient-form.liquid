<div class="recipient-form-wrapper">
  {%- assign gift_card_recipient_control_flag = 'properties[__shopify_send_gift_card_to_recipient]' -%}
  <recipient-form
    class="recipient-form"
    data-section-id="{{ section.id }}"
    data-product-variant-id="{{ product.selected_or_first_available_variant.id }}"
  >
    <div
      class="form-message error{% unless form.errors %} hidden{% endunless %}"
      tabindex="-1"
      autofocus
      data-error-message
    >
      <ul>
        {%- for field in form.errors -%}
          <li>
            {%- if field == 'form' -%}
              {{ form.errors.messages[field] }}
            {%- else -%}
              <a href="#Recipient-{{ field }}-{{ section.id }}" class="text-small" data-error-field>
                {{ form.errors.messages[field] }}
              </a>
            {%- endif -%}
          </li>
        {%- endfor -%}
      </ul>
    </div>
    <div class="custom-checkbox">
      <input
        class="checkmark-input"
        id="Recipient-checkbox-{{ section.id }}"
        type="checkbox"
        name="{{ gift_card_recipient_control_flag }}"
      >
      <span class="checkmark">
        <svg
          width="35"
          height="35"
          viewBox="0 0 35 35"
          fill="currentColor"
        >
          <path d="M15.1401 3.99305C16.3026 2.28723 18.8178 2.28723 19.9803 3.99305V3.99305C20.7317 5.0955 22.1331 5.55086 23.3889 5.10057V5.10057C25.3321 4.40384 27.3669 5.88222 27.3047 7.94558V7.94558C27.2646 9.27909 28.1307 10.4712 29.4114 10.8451V10.8451C31.3929 11.4236 32.1702 13.8157 30.9071 15.4484V15.4484C30.0908 16.5036 30.0908 17.9772 30.9071 19.0324V19.0324C32.1702 20.6652 31.3929 23.0572 29.4114 23.6357V23.6357C28.1307 24.0096 27.2646 25.2017 27.3047 26.5352V26.5352C27.3669 28.5986 25.3321 30.077 23.3889 29.3803V29.3803C22.1331 28.93 20.7317 29.3853 19.9803 30.4878V30.4878C18.8178 32.1936 16.3026 32.1936 15.1401 30.4878V30.4878C14.3888 29.3853 12.9874 28.93 11.7315 29.3803V29.3803C9.78839 30.077 7.75356 28.5986 7.81573 26.5352V26.5352C7.8559 25.2017 6.98976 24.0096 5.70911 23.6357V23.6357C3.72753 23.0572 2.95029 20.6652 4.2134 19.0324V19.0324C5.02972 17.9772 5.02972 16.5036 4.2134 15.4484V15.4484C2.95029 13.8157 3.72753 11.4236 5.70911 10.8451V10.8451C6.98976 10.4712 7.8559 9.27909 7.81573 7.94558V7.94558C7.75356 5.88222 9.78839 4.40384 11.7315 5.10057V5.10057C12.9874 5.55086 14.3888 5.0955 15.1401 3.99305V3.99305Z" class="custom-radio-bg"/>
          <g clip-path="url(#clip0_129_4169)">
          <path d="M22.5385 13.5761C22.2154 13.2388 21.6906 13.2391 21.367 13.5761L16.094 19.0723L13.7504 16.6296C13.4268 16.2923 12.9023 16.2923 12.5786 16.6296C12.255 16.9669 12.255 17.5136 12.5786 17.8509L15.508 20.9042C15.6697 21.0727 15.8817 21.1572 16.0938 21.1572C16.3059 21.1572 16.5181 21.073 16.6798 20.9042L22.5385 14.7975C22.8622 14.4604 22.8622 13.9134 22.5385 13.5761Z" fill="currentColor" class="tick-radio">
          </g>
        </svg>
      </span>
      <label class="recipient-checkbox cursor-pointer" for="Recipient-checkbox-{{ section.id }}">
        {{ 'recipient.form.checkbox' | t }}
      </label>
    </div>

    <div class="recipient-form--field" data-recipient-form>
      <p id="Recipient-fields-live-region-{{ section.id }}" class="hidden" role="status"></p>

      <div class="form-group">
        <label for="Recipient-email-{{ section.id }}">
          {{ 'recipient.form.email_label' | t }}
        </label>
        <input
          class="form-control input-sm"
          id="Recipient-email-{{ section.id }}"
          type="email"
          placeholder="{{ 'recipient.form.email' | t }}"
          name="properties[Recipient email]"
          value="{{ form.email }}"
          {% if form.errors contains 'email' %}
            aria-invalid="true"
            aria-describedby="RecipientForm-email-error-{{ section.id }}"
          {% endif %}
        >
        <div
          id="RecipientForm-email-error-{{ section.id }}"
          class="form-message error{% unless form.errors contains 'email' %} hidden{% endunless %}"
        >
          <span class="error-message">
            {%- if form.errors contains 'email' -%}
              {{ form.errors.messages.email }}.
            {%- endif -%}
          </span>
        </div>
      </div>

      <div class="form-group">
        <label for="Recipient-name-{{ section.id }}">
          {{- 'recipient.form.name_label' | t -}}
        </label>
        <input
          class="form-control input-sm"
          autocomplete="name"
          type="text"
          id="Recipient-name-{{ section.id }}"
          name="properties[Recipient name]"
          placeholder="{{ 'recipient.form.name' | t }}"
          value="{{ form.name }}"
          {% if form.errors contains 'name' %}
            aria-invalid="true"
            aria-describedby="RecipientForm-name-error-{{ section.id }}"
          {% endif %}
        >
        <div
          id="RecipientForm-name-error-{{ section.id }}"
          class="form-message error{% unless form.errors contains 'name' %} hidden{% endunless %}"
        >
          <span class="error-message">
            {%- if form.errors contains 'name' -%}
              {{ form.errors.messages.name }}.
            {%- endif -%}
          </span>
        </div>
      </div>

      {%- assign max_chars_message = 200 -%}
      {%- assign max_chars_message_rendered = 'recipient.form.max_characters' | t: max_chars: max_chars_message -%}
      {%- assign message_label_rendered = 'recipient.form.message_label' | t -%}
      <div class="form-group">
        <label for="Recipient-message-{{ section.id }}">
          {{ message_label_rendered }}
        </label>
        <textarea
          rows="5"
          id="Recipient-message-{{ section.id }}"
          class="text-area form-control"
          name="properties[Message]"
          maxlength="{{ max_chars_message }}"
          placeholder="{{ 'recipient.form.message' | t }}"
          aria-label="{{ message_label_rendered }} {{ max_chars_message_rendered }}"
          {% if form.errors contains 'message' %}
            aria-invalid="true"
            aria-describedby="RecipientForm-message-error-{{ section.id }}"
          {% endif %}
        >{{ form.message }}</textarea>
        <div
          id="RecipientForm-message-error-{{ section.id }}"
          class="form-message error{% unless form.errors contains 'message' %} hidden{% endunless %}"
        >
          <span class="error-message">
            {%- if form.errors contains 'message' -%}
              {{ form.errors.messages.message }}.
            {%- endif -%}
          </span>
        </div>
      </div>
      {% comment %}
        <label class="form__label recipient-form-field-label recipient-form-field-label--space-between">
          <span>{{ max_chars_message_rendered }}</span>
        </label>
      {% endcomment %}
      <div class="form-group">
        <label for="Recipient-send-on-{{ section.id }}">
          {{ 'recipient.form.send_on_label' | t }}
        </label>
        <input
          class="form-control text-body input-sm"
          autocomplete="send_on"
          type="date"
          id="Recipient-send-on-{{ section.id }}"
          name="properties[Send on]"
          placeholder="{{ 'recipient.form.send_on' | t }}"
          pattern="\d{4}-\d{2}-\d{2}"
          value="{{ form.send_on }}"
          {% if form.errors contains 'send_on' %}
            aria-invalid="true"
            aria-describedby="RecipientForm-send_on-error-{{ section.id }}"
          {% endif %}
        >
        <div
          id="RecipientForm-send_on-error-{{ section.id }}"
          class="form-message error{% unless form.errors contains 'send_on' %} hidden{% endunless %}"
        >
          <span class="error-message">
            {%- if form.errors contains 'send_on' -%}
              {{ form.errors.messages.send_on }}.
            {%- endif -%}
          </span>
        </div>
      </div>

      <input
        type="hidden"
        name="{{ gift_card_recipient_control_flag }}"
        value="if_present"
        id="Recipient-control-{{ section.id }}"
      >
      <input
        type="hidden"
        name="properties[__shopify_offset]"
        value=""
        id="Recipient-timezone-offset-{{ section.id }}"
        disabled
      >
    </div>
  </recipient-form>
</div>
