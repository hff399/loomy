<div data-product-media-content>
  <template>
    <product-media-popup-modal
      class="popup product-media-popup scheme-{{ settings.popup_color_scheme }}"
      id="product-media-{{ section.id }}"
      data-drawer="product-media-popup"
      data-section-id="{{ section.id }}"
      data-popup-modal
      data-id="{{ section.id }}"
      data-onclose-focus=""
    >
      <div class="close-drawer" data-close-drawer is="data-moving-cursor-area">
        <div class="data-moving-cursor" data-moving-cursor>
          <svg class="icon icon-cursor" stroke="currentColor" viewBox="0 0 40 40" fill="none">
            <path d="M10 30L30 10M10 10L30 30" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </div>
      </div>
      <div class="popup-content popup-dialog">
        <div class="popup-content-body" data-popup-content>
          <swiper-slideshow>
            <div
              class="swiper"
              data-swiper='
                {
                    "loop": true,
                    "speed": 800,
                    "slidesPerView": 1,
                    "zoom": true,
                    "spaceBetween": 0,
                    "navigation": {
                        "nextEl": ".swiper-button-next-{{ section.id }}",
                        "prevEl": ".swiper-button-prev-{{ section.id }}"
                    },
                    "resizeObserver":true
                }
              '
            >
              <div class="swiper-wrapper">
                {% if product != blank %}
                  {%- if product.selected_or_first_available_variant.featured_media != null -%}
                    {% liquid
                      assign imageRatio = 1 | divided_by: product.selected_or_first_available_variant.featured_media.aspect_ratio | times: 100 | minus: 1 | append: '%'
                    %}
                    {%- assign featured_media = product.selected_or_first_available_variant.featured_media -%}
                    <div class="swiper-slide" data-media-id="{{ section.id }}-{{ featured_media.id }}">
                      <div class="main-product-media-item">
                        <div class="swiper-zoom-container">
                          {% render 'lazy-images', image: featured_media %}
                        </div>
                      </div>
                    </div>
                  {%- endif -%}
                  {% for media in product.media %}
                    {% unless media.id == currentVariant.featured_media.id %}
                      {% liquid
                        assign imageRatio = 1 | divided_by: media.preview_image.aspect_ratio | times: 100 | minus: 1 | append: '%'
                      %}
                      {% case media.media_type %}
                        {% when 'image' %}
                          <div class="swiper-slide" data-media-id="{{ section.id }}-{{ media.id }}">
                            <div class="main-product-media-item">
                              <div class="swiper-zoom-container">
                                {% render 'lazy-images', image: media %}
                              </div>
                            </div>
                          </div>
                      {% endcase %}
                    {% endunless %}
                  {% endfor %}
                {% endif %}
              </div>
              <div class="swiper-button-wrapper">
                <div class="slideshow-nav-btn slideshow-prev cursor-pointer swiper-button-prev-{{ section.id }} arrow-style-{{ settings.arrow_style }}">
                  {% if settings.arrow_style == 'star' %}
                    {% render 'svg-icons', icon: 'star-arrow-prev' %}
                  {% else %}
                    {% render 'svg-icons', icon: 'arrow-icon-prev' %}
                  {% endif %}
                </div>
                <div class="slideshow-nav-btn slideshow-next cursor-pointer swiper-button-next-{{ section.id }} arrow-style-{{ settings.arrow_style }}">
                  {% if settings.arrow_style == 'star' %}
                    {% render 'svg-icons', icon: 'star-arrow-next' %}
                  {% else %}
                    {% render 'svg-icons', icon: 'arrow-icon-next' %}
                  {% endif %}
                </div>
              </div>
            </div>
          </swiper-slideshow>
        </div>
        <close-drawer class="drawer-close-main pos-absolute right-0 top-0" data-drawer-close>
          <button class="drawer-close-btn close-button" aria-label="Close drawer" aria-hidden="true">
            {% render 'svg-icons', icon: 'close' %}
            {% render 'svg-icons', icon: 'close-bg' %}
          </button>
        </close-drawer>
      </div>
    </product-media-popup-modal>
  </template>
</div>
