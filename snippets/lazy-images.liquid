{%- if image != blank %}
    {% liquid
      assign class = class | default: ''
      assign focal_point = image.presentation.focal_point | default: 'center'
      assign focal_point = 'object-position:' | append: focal_point | append: ';'
      assign image_alt = image.alt | default: shop.name | strip_html
      if loading == 'eager'
        assign fetch_priority = 'high'
      else
        assign fetch_priority = 'auto'
      endif
      if sizes
         assign image_sizes = sizes
      else
        assign image_sizes = '100vw'
      endif
    %}
    {{
      image
      | image_url: width: image.width
      | image_tag:
        class: class,
        widths: widths,
        sizes: image_sizes,
        loading: loading,
        fetchpriority: fetch_priority,
        style: focal_point,
        alt: image_alt,
        data-variant-image: data_variant_image
    }}
  {% comment %} <img
    class="no-js-hidden {{ class }}"
    src="{{ image_url }}"
    alt="{{ shop.name }}"
  >
  <noscript>
    <img
      class="no-js-hidden {{ class }}"
      src="{{ image_url }}"
      alt="{{ shop.name }}"
    >
  </noscript>
{% elsif image != blank -%}
  {%- assign img_url = image | image_url: width: '100' | replace: 'width=100', 'width={width}' -%}
  <img
    class="lazyload no-js-hidden {{ class }}{% if lazypreload %} lazypreload{% endif %}"
    data-src="{{ img_url }}"

    src="{{ image | image_url: width: '250' }}"
    data-aspectratio="{{ image.aspect_ratio }}"
    data-sizes="auto"
    data-widths="{{ sizes }}"
    width="{{ image.width }}"
    height="{{ image.height }}"
    data-original="{{ image | image_url }}"
    alt="{{ image.alt | escape }}"
    lazyload="lazy"
    loading="lazy"
    {% if image.presentation.focal_point != blank %}
      style="object-position:{{ image.presentation.focal_point }}"
    {% endif %}
    {% if data_variant_image %}
      data-variant-image="{{ data_variant_image }}"
    {% endif %}
  > {% endcomment %}
  <noscript>
    <img
      class="{{ class }}"
      src="{{ image | img_url: 'master' }}"
      alt="{{ image.alt | default: shop.name | strip_html }}"
      width="{{ image.width }}"
      height="{{ image.height }}"
      {% if image.presentation.focal_point != blank %}
        style="object-position:{{ image.presentation.focal_point }}"
      {% endif %}
    >
  </noscript>
{% endif %}
